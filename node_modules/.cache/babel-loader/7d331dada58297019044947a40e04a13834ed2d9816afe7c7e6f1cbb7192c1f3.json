{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tomer\\\\OneDrive\\\\\\u05E9\\u05D5\\u05DC\\u05D7\\u05DF \\u05D4\\u05E2\\u05D1\\u05D5\\u05D3\\u05D4\\\\sql\\\\courses\\\\coursesapp\\\\src\\\\context\\\\courses.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState } from 'react';\nimport axios from 'axios';\nimport jwt from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CoursesContext = /*#__PURE__*/createContext();\nfunction CoursesProvider(props) {\n  _s();\n  const {\n    children\n  } = props;\n  const [courses, setCourses] = useState([]);\n  const [errorMsg, setErrorMsg] = useState(null);\n  const logOut = async function () {\n    localStorage.removeItem('token');\n    localStorage.removeItem('name');\n  };\n  const addNewCourse = async (e, body) => {\n    const token = localStorage.getItem(\"token\");\n    e.preventDefault();\n    const {\n      name\n    } = jwt(token);\n    const course = await axios.post(\"http://localhost:4002/api/courses\", {\n      body: body,\n      name: name\n    }, {\n      headers: {\n        'x-auth-token': token\n      }\n    });\n    getAllCourses();\n  };\n  const getAllCourses = async () => {\n    try {\n      const response = await (await axios.get(\"http://localhost:4000/api/courses\")).data;\n      setCourses(response);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const signup = async function (e, registerInformation) {\n    e.preventDefault();\n    const {\n      headers\n    } = await axios.post(\"http://localhost:4002/api/users\", {\n      name: registerInformation.name,\n      email: registerInformation.email,\n      password: registerInformation.password\n    });\n    localStorage.setItem(\"token\", headers['x-auth-token']);\n    localStorage.setItem(\"name\", registerInformation.name);\n    e.reset();\n  };\n  const login = async function (e, loginInformation) {\n    e.preventDefault();\n    const login = await axios.post(\"http://localhost:4002/api/auth\", {\n      email: loginInformation.email,\n      password: loginInformation.password\n    });\n    localStorage.setItem(\"token\", login.data);\n    e.reset();\n  };\n  return /*#__PURE__*/_jsxDEV(CoursesContext.Provider, {\n    value: {\n      addNewCourse,\n      getAllCourses,\n      login,\n      signup,\n      logOut\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n}\n_s(CoursesProvider, \"wI8+h57PCQvqm5wWT1iGHAWovJs=\");\n_c = CoursesProvider;\nexport default CoursesProvider;\nvar _c;\n$RefreshReg$(_c, \"CoursesProvider\");","map":{"version":3,"names":["React","createContext","useState","axios","jwt","CoursesContext","CoursesProvider","props","children","courses","setCourses","errorMsg","setErrorMsg","logOut","localStorage","removeItem","addNewCourse","e","body","token","getItem","preventDefault","name","course","post","headers","getAllCourses","response","get","data","error","console","log","signup","registerInformation","email","password","setItem","reset","login","loginInformation"],"sources":["C:/Users/tomer/OneDrive/שולחן העבודה/sql/courses/coursesapp/src/context/courses.js"],"sourcesContent":["import React, { createContext, useState } from 'react';\r\nimport axios from 'axios';\r\nimport jwt from 'jwt-decode'\r\n\r\nexport const CoursesContext=createContext();\r\n\r\nfunction CoursesProvider (props){\r\n    const {children}=props;\r\n    const [courses,setCourses]=useState([])\r\n    const [errorMsg,setErrorMsg]=useState(null)\r\n    const logOut = async function () {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('name');\r\n    };\r\n    const addNewCourse= async(e,body)=>{\r\n        const token = localStorage.getItem(\"token\");\r\n        e.preventDefault();\r\n\r\n        const {name} = jwt(token)\r\n        const course = await axios.post(\"http://localhost:4002/api/courses\", {\r\n            body: body,\r\n            name: name,\r\n        },{headers:{\r\n            'x-auth-token':token\r\n        }});\r\n        getAllCourses();\r\n    }\r\n    const getAllCourses= async()=>{\r\n        try {\r\n            const response=await (await axios.get(\"http://localhost:4000/api/courses\")).data\r\n            setCourses(response)\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n    const signup = async function (e, registerInformation) {\r\n        e.preventDefault();\r\n\r\n        const {headers} = await axios.post(\"http://localhost:4002/api/users\", {\r\n            name: registerInformation.name,\r\n            email: registerInformation.email,\r\n            password: registerInformation.password,\r\n        });\r\n        localStorage.setItem(\"token\",headers['x-auth-token'])\r\n        localStorage.setItem(\"name\",registerInformation.name);\r\n        e.reset()\r\n    };\r\n\r\n    const login = async function (e, loginInformation) {\r\n        e.preventDefault();\r\n\r\n        const login = await axios.post(\"http://localhost:4002/api/auth\", {\r\n            email: loginInformation.email,\r\n            password: loginInformation.password,\r\n        });\r\n        localStorage.setItem(\"token\", login.data);\r\n        e.reset()\r\n    };\r\n\r\n    return (\r\n        <CoursesContext.Provider value={{addNewCourse,getAllCourses,login,signup,logOut}}>\r\n            {children}\r\n        </CoursesContext.Provider>\r\n    );\r\n}\r\n\r\nexport default CoursesProvider;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}