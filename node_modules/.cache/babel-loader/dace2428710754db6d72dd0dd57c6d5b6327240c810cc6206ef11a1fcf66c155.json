{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tomer\\\\OneDrive\\\\\\u05E9\\u05D5\\u05DC\\u05D7\\u05DF \\u05D4\\u05E2\\u05D1\\u05D5\\u05D3\\u05D4\\\\sql\\\\courses\\\\coursesapp\\\\src\\\\context\\\\courses.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState } from 'react';\nimport axios from 'axios';\nimport jwt from 'jwt-decode';\nimport { useNavigate } from 'react-router-dom';\nimport jwtDecode from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CoursesContext = /*#__PURE__*/createContext();\nfunction CoursesProvider(props) {\n  _s();\n  const navigator = useNavigate();\n  const {\n    children\n  } = props;\n  const [courses, setCourses] = useState([]);\n  const [myCourses, setMyCourses] = useState([]);\n  const [errorMsg, setErrorMsg] = useState(null);\n  const [deleteInfo, setDeleteInfo] = useState({});\n  let deleteInformation = {};\n  const logOut = async function () {\n    localStorage.removeItem('token');\n    localStorage.removeItem('name');\n    localStorage.removeItem('user_id');\n  };\n  const getAllCourses = async () => {\n    try {\n      const response = await (await axios.get(\"http://localhost:4000/api/subjects\")).data;\n      console.log(response);\n      setCourses(response);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const userCourses = async () => {\n    const {\n      user_id\n    } = jwtDecode(localStorage.getItem('token'));\n    console.log(user_id);\n    try {\n      const response = await (await axios.get(`http://localhost:4000/api/courses/${user_id}`)).data;\n      setMyCourses(response.rows);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const addMe = async function (e, info) {\n    e.preventDefault();\n    const add = await axios.post(\"http://localhost:4000/api/courses\", info);\n  };\n  const signup = async function (e, registerInformation) {\n    e.preventDefault();\n    const {\n      headers\n    } = await axios.post(\"http://localhost:4000/api/users\", {\n      name: registerInformation.name,\n      email: registerInformation.email,\n      password: registerInformation.password\n    });\n    localStorage.setItem('token', headers['x-auth-token']);\n    localStorage.setItem('name', registerInformation.name);\n    console.log(headers);\n  };\n  const pullMeOut = async function (info) {\n    deleteInformation = info;\n    console.log(info);\n    const pullMe = await axios.post(\"http://localhost:4000/api/courses/deleteSub\", info);\n    userCourses();\n  };\n  const login = async function (e, loginInformation) {\n    e.preventDefault();\n    const login = await axios.post(\"http://localhost:4000/api/auth\", {\n      email: loginInformation.email,\n      password: loginInformation.password\n    });\n    localStorage.setItem(\"token\", login.data.token);\n    localStorage.setItem('name', login.data.name);\n    localStorage.setItem('user_id', login.data.user_id);\n    navigator('/');\n  };\n  return /*#__PURE__*/_jsxDEV(CoursesContext.Provider, {\n    value: {\n      pullMeOut,\n      userCourses,\n      myCourses,\n      login,\n      signup,\n      logOut,\n      addMe,\n      courses,\n      getAllCourses\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n}\n_s(CoursesProvider, \"Pk0NR5er/BH7QxUJsqXPn/aApEE=\", false, function () {\n  return [useNavigate];\n});\n_c = CoursesProvider;\nexport default CoursesProvider;\nvar _c;\n$RefreshReg$(_c, \"CoursesProvider\");","map":{"version":3,"names":["React","createContext","useState","axios","jwt","useNavigate","jwtDecode","CoursesContext","CoursesProvider","props","navigator","children","courses","setCourses","myCourses","setMyCourses","errorMsg","setErrorMsg","deleteInfo","setDeleteInfo","deleteInformation","logOut","localStorage","removeItem","getAllCourses","response","get","data","console","log","error","userCourses","user_id","getItem","rows","addMe","e","info","preventDefault","add","post","signup","registerInformation","headers","name","email","password","setItem","pullMeOut","pullMe","login","loginInformation","token"],"sources":["C:/Users/tomer/OneDrive/שולחן העבודה/sql/courses/coursesapp/src/context/courses.js"],"sourcesContent":["import React, { createContext, useState } from 'react';\r\nimport axios from 'axios';\r\nimport jwt from 'jwt-decode'\r\nimport { useNavigate } from 'react-router-dom';\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nexport const CoursesContext=createContext();\r\n\r\nfunction CoursesProvider (props){\r\n    const navigator=useNavigate()\r\n    const {children}=props;\r\n    const [courses,setCourses]=useState([])\r\n    const [myCourses, setMyCourses] = useState([]);\r\n    const [errorMsg,setErrorMsg]=useState(null)\r\n    const [deleteInfo, setDeleteInfo] = useState({});\r\n    let deleteInformation = {}\r\n    const logOut = async function () {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('name');\r\n\r\n        localStorage.removeItem('user_id');\r\n    };\r\n    const getAllCourses= async()=>{\r\n        try {\r\n            const response=await (await axios.get(\"http://localhost:4000/api/subjects\")).data\r\n            console.log(response)\r\n            setCourses(response)\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n    const userCourses=async()=>{\r\n        const {user_id} = jwtDecode(localStorage.getItem('token'))\r\n        console.log(user_id)\r\n        try {\r\n            const response=await (await axios.get(`http://localhost:4000/api/courses/${user_id}`)).data\r\n\r\n            setMyCourses(response.rows)\r\n            \r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    } \r\n    const addMe=async function (e,info){\r\n        e.preventDefault();\r\n        const add= await axios.post(\"http://localhost:4000/api/courses\",info)\r\n    }\r\n\r\n    const signup = async function (e, registerInformation) {\r\n        e.preventDefault();\r\n        const {headers} = await axios.post(\"http://localhost:4000/api/users\", {\r\n            name: registerInformation.name,\r\n            email: registerInformation.email,\r\n            password: registerInformation.password,\r\n        });\r\n        localStorage.setItem('token',headers['x-auth-token'])\r\n        localStorage.setItem('name',registerInformation.name)\r\n\r\n        console.log(headers)\r\n    };\r\n    const pullMeOut=async function (info){\r\n        deleteInformation= info\r\n        console.log(info)\r\n        const pullMe = await axios.post(\"http://localhost:4000/api/courses/deleteSub\",info)\r\n        userCourses()\r\n\r\n    }\r\n\r\n    const login = async function (e, loginInformation) {\r\n       e.preventDefault();\r\n\r\n       const login = await axios.post(\"http://localhost:4000/api/auth\", {\r\n            email: loginInformation.email,\r\n            password: loginInformation.password,\r\n        });\r\n        localStorage.setItem(\"token\", login.data.token);\r\n        localStorage.setItem('name',login.data.name)\r\n        localStorage.setItem('user_id',login.data.user_id)\r\n        navigator('/')\r\n    };\r\n\r\n    return (\r\n        <CoursesContext.Provider value={{pullMeOut,userCourses,myCourses,login,signup,logOut,addMe,courses,getAllCourses}}>\r\n            {children}\r\n        </CoursesContext.Provider>\r\n    );\r\n}\r\n\r\nexport default CoursesProvider;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}